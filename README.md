# Учебный проект по сетевым технологяи

Проект представляет собой упрощенный чат-мессенджер.

Предоставляются следующие функции:

- регистрация и авторизация пользователей
- создание чатов 
- добавление пользователей в чат по нику
- отправка сообщений в чат, просмотр истории чата
- выход из чата

# Архитектура

Проект представляет собой несколько докер-контейнеров, поднятых в одной локальной докер-сети:

- Основная MySQL база данных на основе общедоступного образа `mysql:8.0`
- Сервис авторизации, отвечающий за хранение информации о пользователе, регистрацию и авторизацию
- Сервис чата, отвечающий за основную бизнес-логику приложения: создание/редактирование чатов, отправка сообщений, управление участниками чатов
- Nginx сервер, оркестрирующий запросы к фронтенду и двум бэкенд-сервисам, а также выступающий единым api gateway, доступным из внешней сети

# Структура проекта

Перечисленные выше сервисы разделены по папкам: auth-service, chat-service, frontend. 

Фронтенд написан на обычном html/css/js. 

Бекенд написан на Python с использованием библиотеки Flask.

Конфиг mysql базы данных находится в файле `mysql-init/init.sql` -- это sql-файл, создающий изначальные таблицы в БД.

В корневом файле `nginx.conf` находится конфиг nginx для редиректа запросов.

# Как поднять приложение

Для того чтобы поднять приложение, нужно указать переменные окружения. Например можно добавить в оркень файл `.env`:

```
# MySQL
MYSQL_ROOT_PASSWORD=# Пароль рута mysql бд
MYSQL_DATABASE=# Название бд в кластере
MYSQL_USER=# Имя пользователя mysql
MYSQL_PASSWORD=# Пароль от mysql бд
MYSQL_PORT=# Порт бд

# JWT
JWT_SECRET=# Закрытый ключ, используемый для шифрации JWT запросов

# NGINX
NGINX_PORT=# Порт nginx
```

После этого поднять компоуз командой `docker-compose up`.

# Эндпойнты

### Сервис авторизации (auth-service)

- POST /mychat/api/auth/register
- POST /mychat/api/auth/login
- POST /mychat/api/auth/verify

### Чат сервис (chat-service)

- GET /mychat/api/chat/
- GET /mychat/api/chat/{chat_id}
- POST /mychat/api/chat/
- POST /mychat/api/chat/{chat_id}/leave
- POST /mychat/api/chat/{chat_id}/message
- POST /mychat/api/chat/{chat_id}/add-user
